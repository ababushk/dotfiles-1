#!/usr/bin/env python3
# coding=utf-8
#
#    Copyright Â© Nexus Edge
#
#       @team: Artificial Intelligence
#    @project: Natural Language Processing: Normalization
#     @author: Manoel Vilela
#      @email: manoel.vilela@engineer.com
#


language: python

python:
  - 3.5
  - 3.4

before_install:
    - pip install --pre coverage
    - pip install -r requirements.txt

build:
    ci:
        - python setup.py install
        - python -m nltk.downloader stopwords rslp punkt
        - mkdir -p -v shippable/testresults
        - mkdir -p -v shippable/codecoverage
        - nosetests --with-xunit --xunit-file=shippable/testresults/nosetests.xml
        - coverage run --branch run_tests.py
        - coverage xml -o shippable/codecoverage/coverage.xml --omit="/root/venv/*"

integrations:
    notifications:
        - integrationName: "Slack webhook #1"
          type: slack
          recipients:
            - txt-classification-v1
          branches:
              only:
                - master
                - dev
          on_success: always
          on_failure: always